<%- include('../includes/head.ejs') %>
    <link rel="stylesheet" href="/css/product.css">
    <script>
    
    function closeCartMessage() {
        console.log('Event triggered!');
        document.getElementById('messageContainer').style.display = 'none';
        document.getElementById()
        console.log('Modal closed!')
    
    }</script>
    </head>

    <body>
        <%- include('../includes/navigation.ejs') %>
        <% if(cartMessage) { %>
            <div class="messageContainer" id="messageContainer">
                <div class="cartMessage"><%= cartMessage %><button type="submit" class="close" onclick="closeCartMessage()"><i class="fas fa-window-close"></i></button></div>
            </div>
        <% } %>
            <main>
                <% if (prods.length > 0) { %>
                    <div class="grid">
                        <% for (let product of prods) { %>
                            <article class="card product-item">
                                <a class="detailsCardLink" href="/products/<%= product._id %>">
                                    <header class="card__header">
                                        <h1 class="product__title">
                                            <%= product.title %>
                                        </h1>
                                    </header>
                                    <div class="card__image">
                                        <img src="<%= product.imageUrl %>" alt="<%= product.title %>">
                                    </div>
                                    <div class="card__content">
                                        <h2 class="product__price">$
                                            <%= product.price %>
                                        </h2>
                                        <p class="product__description">
                                            <%= product.description %>
                                        </p>
                                    </div></a>
                                <div class="card__actions">
                                    <%  if(isAuthenticated) { %>
                                        <%- include('../includes/add-to-cart.ejs', {product: product}) %>
                                    <% } %>
                                </div>
                            </article>
                            <% } %>
                    </div>
                    <% } else { %>
                        <h1>No Products Found!</h1>
                        <% } %>
            </main>
            <script src="/js/main.js"></script>
            <script defer src="/js/product.js" type="module"></script>
        </body>
        
        </html>